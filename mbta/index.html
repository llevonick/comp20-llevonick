<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <link rel = "stylesheet" href = "style.css" />
    <title>MBTA Map</title>
    <script type = "text/javascript" src = "https://maps.googleapis.com/maps/api/js?sensor=true"></script>
    <script>
        stations = {}
        stations["Alewife"] = {lat:42.395428, lng:-71.142483};
        stations["Davis"] = {lat:42.39674, lng:-71.121815};
        stations["Porter Square"] = {lat:42.3884, lng:-71.11914899999999};
        stations["Harvard Square"] = {lat:42.373362, lng:-71.118956};
        stations["Central Square"] = {lat:42.365486, lng:-71.103802};
        stations["Kendall/MIT"] = {lat:42.36249079, lng:-71.08617653};
        stations["Charles/MGH"] = {lat:42.361166, lng:-71.070628};
        stations["Park Street"] = {lat:42.35639457, lng:-71.0624242};
        stations["Downtown Crossing"] = {lat:42.355518, lng:-71.060225};
        stations["South Station"] = {lat:42.352271, lng:-71.05524200000001};
        stations["Broadway"] = {lat:42.342622, lng:-71.056967};
        stations["Andrew"] = {lat:42.330154, lng:-71.057655};
        stations["JFK/UMass"] = {lat:42.320685, lng:-71.052391};
        stations["Savin Hill"] = {lat:42.31129, lng:-71.053331};
        stations["Fields Corner"] = {lat:42.300093, lng:-71.061667};
        stations["Shawmut"] = {lat:42.29312583, lng:-71.06573796000001};
        stations["Ashmont"] = {lat:42.284652, lng:-71.06448899999999};        
        stations["North Quincy"] = {lat:42.275275, lng:-71.029583};
        stations["Wollaston"] = {lat:42.2665139, lng:-71.0203369};
        stations["Quincy Center"] = {lat:42.251809, lng:-71.005409};
        stations["Quincy Adams"] = {lat:42.233391, lng:-71.007153};
        stations["Braintree"] = {lat:42.2078543, lng:-71.0011385};

        stationNames = Object.keys(stations);

        request = new XMLHttpRequest();
        myLoc = new google.maps.LatLng(stations["South Station"]);

        options = {
            zoom: 13,
            center: myLoc,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        img = "t.png";

        infowindow = new google.maps.InfoWindow();

        FirstRedSeg = [];
        SecondRedSeg = [];

        SecondRedSeg.push(stations["JFK/UMass"]);

        function init(){
            map = new google.maps.Map(document.getElementById("mbta_map"), options);
            markers(map);
            redPolyline(map);
        }

        function markers(map){
            for(var i = 0; i < stationNames.length; i++){
                var marker = new google.maps.Marker({
                    position: stations[stationNames[i]],
                    title: stationNames[i],
                    icon: img
                });
                marker.setMap(map);
            }
        }

        function redPolyline(map){
            FirstRedSegDone = 0;

            for(var i = 0; i < stationNames.length; i++){
                if(FirstRedSegDone == 0){
                    FirstRedSeg.push(stations[stationNames[i]]);
                    if(stationNames[i] == "Ashmont"){
                        FirstRedSegDone += 1;
                    }
                }
                else{
                    SecondRedSeg.push(stations[stationNames[i]]);
                }
            }

            FirstRedLinePath = new google.maps.Polyline({
                path: FirstRedSeg,
                geodesic: true,
                strokeColor: '#FF3F4E',
                strokeOpactiy: 1,
                strokeWeight: 2
            });

            FirstRedLinePath.setMap(map);

            SecondRedLinePath = new google.maps.Polyline({
                path: SecondRedSeg,
                geodesic: true,
                strokeColor: '#FF3F4E',
                strokeOpactiy: 1,
                strokeWeight: 2
            });

            SecondRedLinePath.setMap(map);
        }
    </script>
</head>

<body onload = "init()">
    <div id="mbta_map"></div>
</body>

</html>